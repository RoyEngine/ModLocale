# 本地化工具重构计划

## 1. 更新菜单选项

### 1.1 调整主菜单顺序
- [x] 交换第3和第4个菜单选项，将Decompile模式设置为第3项，文件管理模式设置为第4项
- [x] 更新`select_main_mode`函数中的打印语句，确保与用户指定的文本完全一致
- [x] 更新`main`函数中对应的模式处理逻辑，确保模式3执行Decompile模式，模式4执行文件管理模式

## 2. 重构main.py文件

### 2.1 代码结构优化
- [x] 重新组织函数顺序，按功能模块分组（菜单函数、工具函数、主流程函数）
- [x] 移除不必要的注释和冗余代码
- [x] 统一函数命名风格，使用小写字母+下划线格式

### 2.2 文档完善
- [x] 为所有函数添加完整的docstring，遵循Google风格
- [x] 添加类型注解，提高代码可读性和类型安全性
- [x] 为复杂逻辑添加清晰的注释

### 2.3 错误处理改进
- [x] 完善try-except块，添加更具体的异常类型
- [x] 改进错误信息，提供更有用的调试信息
- [x] 添加适当的日志记录

### 2.4 性能优化
- [x] 减少不必要的模块导入
- [x] 优化函数调用，减少重复计算
- [x] 改进文件操作，使用更高效的方法

## 3. 目录结构重构

### 3.1 目录职责定义
- [x] 明确`config`目录：存放应用配置文件，如目录映射、语言设置等
- [x] 明确`File`目录：存放源文件、备份文件、映射规则和输出结果
- [x] 明确`src`目录：存放应用源代码，包括核心功能模块

### 3.2 命名约定统一
- [x] 实现统一的文件命名规则（小写字母+下划线）
- [x] 实现统一的目录命名规则
- [x] 确保配置文件命名一致

### 3.3 导入机制改进
- [x] 优化模块导入结构，减少相对导入
- [x] 实现清晰的包结构
- [x] 添加`__init__.py`文件，规范包导入

### 3.4 文档创建
- [x] 创建目录结构文档，说明各目录的职责和关系
- [x] 创建文件命名约定文档
- [x] 更新README.md，添加项目结构说明

### 3.5 文件迁移
- [x] 将相关配置文件迁移到适当的目录
- [x] 调整源代码文件位置，确保逻辑分组
- [x] 更新所有文件路径引用

### 3.6 测试开发
- [x] 开发测试用例，验证重构后的目录结构
- [x] 测试模块导入功能
- [x] 验证文件操作功能

### 3.7 验证与优化
- [x] 验证重构后的应用功能完整性
- [x] 测试性能改进
- [x] 收集反馈，进一步优化

## 4. 具体实现步骤

### 4.1 菜单选项更新
1. 修改`select_main_mode`函数，调整菜单顺序
2. 更新`main`函数中的模式处理逻辑
3. 测试菜单功能，确保选项与功能对应

### 4.2 main.py重构
1. 分析当前函数结构，确定重构方案
2. 重新组织函数顺序，按功能分组
3. 添加和完善docstring
4. 改进错误处理
5. 优化性能
6. 测试重构后的代码

### 4.3 目录结构重组
1. 创建重构计划文档
2. 定义新的目录结构和职责
3. 迁移文件到新位置
4. 更新导入语句和文件路径引用
5. 创建目录结构文档
6. 开发测试用例
7. 验证重构结果

## 5. 预期成果

- 菜单选项按要求更新，功能对应正确
- main.py代码结构清晰，可读性高，性能优化
- 目录结构合理，职责明确，便于维护和扩展
- 文档完善，便于新开发者理解和贡献
- 应用功能完整，性能提升

## 6. 风险评估与应对

- **风险**：重构可能引入新的bug
  **应对**：进行全面测试，包括单元测试和集成测试
- **风险**：目录结构变化导致现有功能失效
  **应对**：逐步迁移，确保每个步骤都经过测试
- **风险**：重构时间超出预期
  **应对**：制定详细计划，按优先级执行，确保核心功能优先完成

## 7. 验收标准

1. 菜单选项显示正确，功能对应正确
2. main.py代码符合PEP 8规范，结构清晰，注释完整
3. 目录结构合理，职责明确
4. 应用功能完整，性能良好
5. 文档完善，便于理解和维护