# 修复输出文件夹命名问题 - 复用init_mode逻辑

## 问题分析

当前实现中，输出文件夹名称不符合预期，主要问题在于：

1. **extract_mode/core.py**：
   - 生成的文件夹名称为 `Extract_English\English`，不符合预期
   - 没有复用init_mode中已有的正确文件夹命名逻辑

2. **extend_mode/core.py**：
   - 可能存在类似的问题

3. **decompile_mode/core.py**：
   - 可能存在类似的问题

## 修复计划

### 步骤1：复用init_mode中的文件夹命名逻辑

1. **在各模块中导入init_mode功能**：
   - 在extract_mode、extend_mode和decompile_mode中导入init_mode的相关功能
   - 使用init_mode提供的ID分组信息来匹配对应的文件夹

2. **修改extract_mode/core.py**：
   - 修改_extract_strings_from_source函数，使用init_mode的get_group_path函数获取正确的文件夹路径
   - 确保输出文件夹名与源mod文件夹名完全一致
   - 移除不必要的mod_name修改逻辑

3. **修改extend_mode/core.py**：
   - 修改输出文件夹命名逻辑，使用init_mode的get_group_path函数获取正确的文件夹路径
   - 确保输出文件夹名与源mod文件夹名完全一致

4. **修改decompile_mode/core.py**：
   - 修改输出文件夹命名逻辑，使用init_mode的get_group_path函数获取正确的文件夹路径
   - 确保输出文件夹名与源mod文件夹名完全一致

### 步骤2：统一输出文件夹命名规范

1. **extract_mode**：
   - 输出路径格式：`File/output/Extract_<Language>/<SourceModFolderName>`
   - 确保SourceModFolderName与源mod文件夹名完全一致

2. **extend_mode**：
   - 输出路径格式：`File/output/Extend_<Direction>/<SourceModFolderName>`
   - 确保SourceModFolderName与源mod文件夹名完全一致

3. **decompile_mode**：
   - 输出路径格式：`File/output/Decompile/<SourceModFolderName>`
   - 确保SourceModFolderName与源mod文件夹名完全一致

### 步骤3：验证修复效果

1. **运行init_mode初始化**：
   - 确保init_mode正确构建了mod映射和分组映射

2. **运行各功能模块测试**：
   - 执行extract流程，验证输出文件夹名与源mod文件夹名一致
   - 执行extend流程，验证输出文件夹名与源mod文件夹名一致
   - 执行decompile流程，验证输出文件夹名与源mod文件夹名一致

3. **手动验证**：
   - 检查输出目录结构，确保输出文件夹名与源mod文件夹名完全匹配

## 预期效果

1. **extract_mode**：
   - 输出文件夹名与源mod文件夹名完全一致
   - 规则文件正确输出到对应位置

2. **extend_mode**：
   - 输出文件夹名与源mod文件夹名完全一致
   - 映射结果正确输出到对应位置

3. **decompile_mode**：
   - 输出文件夹名与源mod文件夹名完全一致
   - 反编译结果正确输出到对应位置

4. **整体效果**：
   - 每个mod文件夹与其关联的输出文件夹之间保持直接的一一对应关系
   - 输出文件夹名称与源mod文件夹名称完全相同，无任何修改、截断或添加
   - 所有模块复用init_mode的文件夹命名逻辑，提高代码的可维护性和一致性

## 实现细节

1. **extract_mode/core.py**：
   - 从init_mode导入get_group_by_id和get_group_path函数
   - 使用源mod文件夹的mod_id获取分组信息
   - 使用分组信息构建正确的输出文件夹路径

2. **extend_mode/core.py**：
   - 从init_mode导入get_group_by_id和get_group_path函数
   - 使用源mod文件夹的mod_id获取分组信息
   - 使用分组信息构建正确的输出文件夹路径

3. **decompile_mode/core.py**：
   - 从init_mode导入get_group_by_id和get_group_path函数
   - 使用源mod文件夹的mod_id获取分组信息
   - 使用分组信息构建正确的输出文件夹路径

4. **init_mode集成**：
   - 确保init_mode在各功能模块执行前已完成初始化
   - 确保mod映射和分组映射已正确构建

通过以上修复，确保所有功能模块统一采用源mod文件夹的名称作为输出文件夹名称，复用init_mode中已有的文件夹命名逻辑，提高代码的可维护性和一致性。