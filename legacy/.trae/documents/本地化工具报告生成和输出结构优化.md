# 本地化工具报告生成和输出结构优化

## 1. 目标
- 为每个文件夹单独生成报告
- 将报告保存到对应输出文件夹内
- 为decompile_mode添加按语言分离输出的功能

## 2. 分析

### 2.1 当前状态
- **extract_mode**: 已实现按语言分离输出，每个模组有自己的输出文件夹和报告
- **extend_mode**: 每个模组有自己的输出文件夹，但没有为每个文件夹单独生成报告
- **decompile_mode**: 没有按语言分离输出，报告保存到外部目录

### 2.2 需要修改的文件
- `src/extract_mode/core.py`: 确保报告保存到每个输出文件夹内
- `src/extend_mode/core.py`: 为每个文件夹单独生成报告
- `src/decompile_mode/core.py`: 添加按语言分离输出，为每个文件夹单独生成报告

## 3. 具体实现计划

### 3.1 extract_mode 优化
- 确保每个模组的报告都保存到其对应的输出文件夹内
- 检查报告生成逻辑，确保符合要求

### 3.2 extend_mode 优化
- 修改报告生成逻辑，为每个文件夹单独生成报告
- 确保报告保存到对应输出文件夹内
- 修改 `_process_mod_for_mapping` 函数，为每个模组生成单独的报告

### 3.3 decompile_mode 优化
- 添加按语言分离输出功能，参考extract_mode的实现
- 修改输出路径格式为：`File/output/Decompile_{language}/{mod_name}`
- 为每个JAR文件生成单独的报告
- 将报告保存到对应输出文件夹内

## 4. 实现步骤

### 4.1 第一步：修改decompile_mode/core.py
- 添加语言检测逻辑
- 修改输出路径，按语言分离
- 为每个JAR文件生成单独的报告

### 4.2 第二步：修改extend_mode/core.py
- 为每个模组生成单独的报告
- 确保报告保存到对应输出文件夹内

### 4.3 第三步：检查extract_mode/core.py
- 确保报告生成逻辑符合要求

## 5. 测试验证
- 运行extract流程，验证报告生成和保存位置
- 运行extend流程，验证报告生成和保存位置
- 运行decompile流程，验证按语言分离输出和报告生成

## 6. 预期结果
- 所有三个模式都为每个文件夹单独生成报告
- 报告保存到对应输出文件夹内
- decompile_mode实现按语言分离输出